好的，接下来我将详细讲解如何开发 **模块 1：用户存款和资金管理模块**，并给出具体步骤和代码实现。

### **模块 1：用户存款和资金管理模块**

#### **目标**
- 允许用户向系统存入资金。
- 记录每个用户的存款金额和存款时间。
- 用户可以查询自己的存款金额和存款时间。

### **步骤 1：创建文件夹和目录结构**
1. 在项目根目录下创建一个新的文件夹（例如 `contracts`）来存放智能合约代码。

   ```bash
   mkdir contracts
   cd contracts
   ```

2. 在 `contracts` 文件夹中创建一个新的 Solidity 文件 `DepositContract.sol`，用于实现存款和资金管理逻辑。

   ```bash
   touch DepositContract.sol
   ```

### **步骤 2：编写存款智能合约**
在 `DepositContract.sol` 文件中编写存款逻辑代码。我们要实现以下功能：
- 用户存款：用户可以调用 `deposit` 函数存入资金。
- 查询存款：用户可以查询自己的存款金额。
- 查询存款时间：用户可以查询自己的存款时间。

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract DepositContract {
    // 记录每个用户的存款金额
    mapping(address => uint256) public balances;
    // 记录每个用户的存款时间
    mapping(address => uint256) public depositTimes;

    // 存款事件
    event Deposit(address indexed user, uint256 amount, uint256 time);

    // 存款函数
    function deposit() public payable {
        require(msg.value > 0, "Deposit amount must be greater than zero");

        // 更新用户存款
        balances[msg.sender] += msg.value;
        // 更新存款时间
        depositTimes[msg.sender] = block.timestamp;

        // 触发存款事件
        emit Deposit(msg.sender, msg.value, block.timestamp);
    }

    // 查询用户的存款金额
    function getBalance(address user) public view returns (uint256) {
        return balances[user];
    }

    // 查询用户的存款时间
    function getDepositTime(address user) public view returns (uint256) {
        return depositTimes[user];
    }
}
```

### **代码解释：**
1. **`balances`**：一个映射，记录每个地址对应的存款金额。
2. **`depositTimes`**：一个映射，记录每个地址的存款时间。
3. **`deposit` 函数**：用户调用该函数向合约存款。存款金额通过 `msg.value` 获取，存款时间通过 `block.timestamp` 获取。
4. **`getBalance` 函数**：查询用户的存款金额。
5. **`getDepositTime` 函数**：查询用户的存款时间。
6. **`Deposit` 事件**：当用户存款时，触发此事件，记录存款的地址、金额和时间。

### **步骤 3：配置和部署合约**
1. **安装依赖：** 如果你还没有安装 Hardhat，先安装并初始化 Hardhat 项目。

   ```bash
   mkdir chrono-revive && cd chrono-revive
   npm init -y
   npm install --save-dev hardhat
   ```

2. **初始化 Hardhat 项目：**

   ```bash
   npx hardhat
   ```

   选择 "Create an empty hardhat project"。

3. **安装所需插件：**

   ```bash
   npm install @nomiclabs/hardhat-ethers ethers
   ```

4. **配置 `hardhat.config.js`：** 打开 `hardhat.config.js` 文件并根据需要进行修改。比如，你可以设置 Solidity 编译器的版本。

```javascript
require('@nomiclabs/hardhat-ethers');

module.exports = {
  solidity: "0.8.0",
};
```

5. **编写部署脚本：** 在 `scripts` 文件夹中创建一个部署脚本 `deploy.js`，并编写合约部署逻辑。

   ```bash
   mkdir scripts
   touch scripts/deploy.js
   ```

   在 `deploy.js` 中编写以下内容：

```javascript
async function main() {
    const [deployer] = await ethers.getSigners();

    console.log("Deploying contracts with the account:", deployer.address);

    const DepositContract = await ethers.getContractFactory("DepositContract");
    const depositContract = await DepositContract.deploy();

    console.log("DepositContract deployed to:", depositContract.address);
}

main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error(error);
        process.exit(1);
    });
```

6. **部署合约：** 通过 Hardhat 部署合约到本地网络。

   启动本地 Hardhat 网络：
   ```bash
   npx hardhat node
   ```

   部署合约：
   ```bash
   npx hardhat run scripts/deploy.js --network localhost
   ```

   在控制台中，你将看到类似以下输出：
   ```
   Deploying contracts with the account: 0xYourDeployerAddress
   DepositContract deployed to: 0xYourContractAddress
   ```

### **步骤 4：测试存款功能**
为了确保合约工作正常，你可以编写一些测试用例来测试存款功能。

1. **安装测试依赖：**

   ```bash
   npm install --save-dev mocha chai
   ```

2. **编写测试文件：** 在 `test` 文件夹中创建 `depositContract.test.js` 测试文件，并编写测试用例。

   ```bash
   mkdir test
   touch test/depositContract.test.js
   ```

   在 `depositContract.test.js` 中，编写以下测试用例：

```javascript
const { expect } = require("chai");

describe("DepositContract", function () {
    let DepositContract;
    let depositContract;
    let owner;

    beforeEach(async function () {
        [owner] = await ethers.getSigners();
        DepositContract = await ethers.getContractFactory("DepositContract");
        depositContract = await DepositContract.deploy();
    });

    it("should allow users to deposit funds", async function () {
        await depositContract.deposit({ value: ethers.utils.parseEther("1") });
        const balance = await depositContract.getBalance(owner.address);
        expect(balance).to.equal(ethers.utils.parseEther("1"));
    });

    it("should record deposit time", async function () {
        await depositContract.deposit({ value: ethers.utils.parseEther("1") });
        const depositTime = await depositContract.getDepositTime(owner.address);
        expect(depositTime).to.be.a('number');
    });
});
```

3. **运行测试：**

   ```bash
   npx hardhat test
   ```

   如果合约和测试都正确，应该能看到类似以下的输出：

   ```
   DepositContract
     ✓ should allow users to deposit funds
     ✓ should record deposit time
   ```

### **步骤 5：前端集成**
接下来，你可以在前端通过 Web3.js 或 ethers.js 与智能合约进行交互，来实现存款功能。

1. **安装 ethers.js：**

   ```bash
   npm install ethers
   ```

2. **创建前端存款交互：** 在你的前端项目中，使用 `ethers.js` 来调用 `deposit` 函数。

   ```javascript
   import { ethers } from "ethers";

   async function deposit() {
       if (window.ethereum) {
           const provider = new ethers.providers.Web3Provider(window.ethereum);
           const signer = provider.getSigner();
           const contractAddress = "YOUR_CONTRACT_ADDRESS";
           const abi = [ /* ABI */ ];
           const contract = new ethers.Contract(contractAddress, abi, signer);

           const tx = await contract.deposit({ value: ethers.utils.parseEther("1") });
           await tx.wait();
       } else {
           alert("Please install MetaMask!");
       }
   }
   ```

### **总结：**
- 你已经完成了存款模块的开发，包括合约编写、部署和测试。
- 接下来，你可以继续集成前端，实现用户与区块链的交互。
- 一旦存款功能完成，你可以在此基础上继续开发资金池管理和复活基金计算的其他模块。

按照上述步骤，你将能够成功开发并测试 **模块 1：用户存款和资金管理模块**。